<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <meta name="description" content="Add or edit an item for bidding or display.">
  <title>
  {{if eq .Item.ID 0}}
    {{.Title}} - New Item
  {{else}}
    {{.Title}} - Edit Item {{.Item.ID}}
  {{end}}
  </title>
  <link rel="stylesheet" href="/pico.min.css">
  <link rel="stylesheet" href="/gobid.css">
</head>

<body>
  <a class="skip-link" href="#main">Skip to main content</a>
  <header class="app-header">
    <nav class="container" aria-label="Primary navigation">
      <ul>
        <li><a href="/"><strong>{{.Title}}</strong></a></li>
        <li><a href="/items">Items</a></li>
      </ul>
      <ul>
        {{if ne .Item.ID 0}}
        <li><a href="/edit/0">New Item</a></li>
        {{end}}
      </ul>
      <ul>
        {{if .User.Username}}
        <li><a href="/logout">Logout {{.User.Username}}</a></li>
        {{else}}
        <li><a href="/login">Login</a></li>
        {{end}}
      </ul>
    </nav>
  </header>

  <main id="main" tabindex="-1" class="container">
    <h1>
    {{if eq .Item.ID 0}}
      New Item
    {{else}}
      Edit Item {{.Item.ID}}
    {{end}}
    </h1>

    <form method="post" enctype="multipart/form-data">
      {{if .Message}}
      <p class="message" role="status">{{.Message}}</p>
      {{ end }}

      {{if .Message}}<p role="alert"> <mark>{{.Message}}</mark> </p>{{ end }}
  
      {{ with .Item }}
      <fieldset>
        <legend>Item Details</legend>

        <label for="artist">
          Artist or Donor <span aria-hidden="true">(Required)</span>
        </label>
        <input
          id="artist" name="artist"
          type="text"
          value="{{.Artist}}"
          maxlength="30"
          required
        >
    
        <label for="title">
          Title <span aria-hidden="true">(Required)</span>
        </label>
        <input
          id="title" name="title"
          type="text"
          value="{{.Title}}"
          maxlength="40"
          required
        >
    
        <label for="description">
          Description <span aria-hidden="true">(Required)</span>
        </label>
        <textarea
          id="description" name="description"
          maxlength="255"
          rows="1"
          required
        >{{.Description}}</textarea>
      </fieldset>
  
      <fieldset>
        <legend>Bid Details</legend>
        <label for="openingBid">
          Opening Bid <span aria-hidden="true">(Required)</span>
        </label>
        <input
          id="openingBid" name="openingBid"
          type="number"
          value="{{.OpeningBid}}"
          min="0"
          required
          aria-describedby="openingBidHelp"
        >
        <small id="openingBidHelp">Enter 0 for display only items</small>
  
        <label for="minBidIncr">
          Minimum Bid Increment <span aria-hidden="true">(Required)</span>
        </label>
        <input
          id="minBidIncr" name="minBidIncr"
          type="number"
          value="{{.MinBidIncr}}"
          min="1"
          required
        >
      </fieldset>
  
      <fieldset>
        <legend>Image Details</legend>
        <label for="imageFile">
          Image File <span aria-hidden="true">(Required)</span>
        </label>
        <div class="grid">
        {{if ne .ID 0}}
        <input
          id="imageFileName" name="imageFileName"
          type="text"
          value="{{.ImageFileName}}"
          maxlength="255"
          required
        >
        {{end}}
        <input id="imageFile" name="imageFile" type="file">
        </div>
      </fieldset>
      {{end}} {{/* with .Item */}}
  
      {{if .User.IsAdmin}}
      <button type="submit">
        {{if eq .Item.ID 0}}Create{{else}}Update{{end}}
      </button>
      {{end}}
      </form>
    </main>
</body>

</html>
